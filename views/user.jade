extends layout

block content
  //- パンくずリスト
  ol(class="breadcrumb")
    li(class="breadcrumb-item active")
      a(href="/") Home
  //- タブ
  if user
    ul(class="nav nav-tabs")
      li
        a(href="/") Home
      li(class="active")
        a(href="/users/#{user.id}") user
      li
        a(href="/users/#{user.id}/favorites") favorites
    //- パネル
    div
      - var hasGames = games.length > 0
      if hasGames
        each game in games
          div(class="panel panel-default")
            div(class="panel-body")
              h3
                a(href="/games/#{game.gameId}") #{game.gameName}
              h4
                each tag in game.tags
                  span(class="label label-primary") #{tag}
              ul
                li
                  i(class="fa fa-commenting-o" aria-hidden="true")
                  span(class="badge likeCount") 8

                if user
                  li
                    - var favorite = favoriteMap.get(game.gameId) || 0
                    if favorite === 1
                      i(class="fa fa-star favorite-toggle-button" aria-hidden="true" data-game-id="#{game.gameId}" data-user-id="#{user.id}" data-favorite="#{favorite}")
                    else
                      i(class="fa fa-star-o favorite-toggle-button" aria-hidden="true" data-game-id="#{game.gameId}" data-user-id="#{user.id}" data-favorite="#{favorite}")
                li
                  i(class="fa fa-thumbs-o-up" aria-hidden="true")
                  span(class="badge likeCount") 8
            - var stages = JSON.stringify(Array.from(gameMap.get(game.gameId)))
            div(class="panel-footer playGame" data-stages="#{stages}" data-toggle="modal" href="##{game.gameId}") PLAY
          div(class="modal fade" id="#{game.gameId}")
            include includes/modal.jade
