extends layout

block content
  //- パンくずリスト
  ol(class="breadcrumb")
    li(class="breadcrumb-item active")
      a(href="/") Home
  //- タブ
  if user
    ul(class="nav nav-tabs")
      li
        a(href="/") Home
      li(class="active")
        a(href="/users/#{user.id}") user
      li
        a(href="/users/#{user.id}/favorites") favorites
    //- パネル
    - var hasGames = games.length > 0
    if hasGames
      each game in games
        div(class="panel panel-default")
          div(class="panel-body")
            - var favorite = favoriteMap.get(game.gameId) || 0
            if favorite === 1
              span(class="favorite-toggle-button glyphicon glyphicon-heart" data-game-id="#{game.gameId}" data-user-id="#{user.id}" data-favorite="#{favorite}")
            else
              span(class="favorite-toggle-button glyphicon glyphicon-heart-empty" data-game-id="#{game.gameId}" data-user-id="#{user.id}" data-favorite="#{favorite}")
            h3 #{game.gameName}
            h4 #{game.privacy}
            h4
              each tag in game.tags
                span(class="label label-info") #{tag}
            - var stages = JSON.stringify(Array.from(gameMap.get(game.gameId)))
            a(class="playGame" class="btn btn-default" data-stages="#{stages}" data-toggle="modal" href="##{game.gameId}") start
            a(class="btn btn-default" href="/games/#{game.gameId}") 詳しく見る
        div(class="modal fade" id="#{game.gameId}")
          include includes/modal.jade
